C51 COMPILER V9.54   MAIN                                                                  11/08/2024 20:23:28 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main.l
                    -st) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          #include "LCD1602.h"
   4          #include "Key.h"
   5          #include "AT24C02.h"
   6          
   7          /*
   8          ST89C52å•ç‰‡æœºä¸ AT24C02(å¸¸è§çš„ EEPROMï¼ˆç”µå¯æ“¦é™¤å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨ï¼‰èŠ¯ç‰‡)
   9          é€šå¸¸é€šè¿‡ IÂ²C æ€»çº¿è¿æ¥ã€‚è¿æ¥æ–¹å¼å¦‚ä¸‹ï¼š
  10          å°† ST89C52å•ç‰‡æœºçš„ä¸¤ä¸ªI/Oå¼•è„šåˆ†åˆ«è¿æ¥åˆ°AT24C02çš„SCLï¼ˆæ—¶é’Ÿçº¿å’ŒSDAï¼ˆæ•°æ®çº¿ï¼‰å¼•è„šã
             -€‚
  11          é€šå¸¸éœ€è¦åœ¨SCL å’Œ SDA çº¿ä¸Šè¿æ¥ä¸Šæ‹‰ç”µé˜»ï¼ˆä¸€èˆ¬ä¸º 4.7kÎ© å·¦å³ï¼‰åˆ°ç”µæº VCCã€‚
  12          
  13          AT24C02 æ˜¯ä¸€ä¸ª 2K ä½ï¼ˆ256 å­—èŠ‚ï¼‰çš„ä¸²è¡Œç”µå¯æ“¦é™¤å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨ï¼ˆEEPROMï¼‰ã€‚
  14          æ‰€ä»¥ä»æœº AT24C02 å¯ä»¥å­˜å‚¨ 256 ä¸ªå­—èŠ‚çš„æ•°æ®
  15          */
  16          
  17          unsigned char KeyNum;
  18          unsigned int Num;   //Numå ä¸¤ä¸ªå­—èŠ‚
  19          
  20          void main()
  21          {
  22   1              LCD_Init();
  23   1              LCD_ShowNum(1,1,Num,5);
  24   1      //      AT24C02_WriteByte(0,147);
  25   1      //      Delay(5);
  26   1      //      AT24C02_WriteByte(1,17);
  27   1      //      Delay(5);
  28   1      //      AT24C02_WriteByte(2,14);
  29   1      //      Delay(5);     //åœ¨å¯¹ AT24C02 è¿›è¡Œå†™æ“ä½œåï¼Œéœ€è¦ç­‰å¾…5msçš„å†™å‘¨æœŸæ‰èƒ½è¯»å‡ºæ¥
  30   1      //      Data = AT24C02_ReadByte(1);
  31   1      //      LCD_ShowNum(2,1,Data,3);
  32   1          while(1)
  33   1          {
  34   2              KeyNum = Key();
  35   2                      if(KeyNum == 1)
  36   2                      {
  37   3                              Num++;
  38   3                              LCD_ShowNum(1,1,Num,5);
  39   3                      }
  40   2                      if(KeyNum == 2)
  41   2                      {
  42   3                              Num--;
  43   3                              LCD_ShowNum(1,1,Num,5);
  44   3                      }
  45   2                      if(KeyNum == 3)
  46   2                      {
  47   3                              AT24C02_WriteByte(0,Num%256);//Numçš„ä½8ä½å­˜æ”¾åœ¨AT24C02ç¬¬é›¶ä¸ªå­—èŠ‚
  48   3                              Delay(5);
  49   3                              AT24C02_WriteByte(1,Num/256);//Numçš„é«˜8ä½å­˜æ”¾åœ¨AT24C02ç¬¬ä¸€ä¸ªå­—èŠ‚
  50   3                              Delay(5);
  51   3                              LCD_ShowString(2,1,"Write OK");
  52   3                              Delay(1000);
  53   3                              LCD_ShowString(2,1,"        ");
C51 COMPILER V9.54   MAIN                                                                  11/08/2024 20:23:28 PAGE 2   

  54   3                      }
  55   2                      if(KeyNum == 4)
  56   2                      {
  57   3                              Num = AT24C02_ReadByte(0); //Numçš„ä½8ä½æ•°æ®ï¼Œæ­¤æ—¶Numçš„é«˜å…«ä½å…¨ä¸º0
  58   3                              Num |= AT24C02_ReadByte(1)<<8;
  59   3                              // AT24C02ç¬¬ä¸€ä¸ªå­—èŠ‚å·¦ç§»8ä½åä¸º16ä½æ•°æ®ï¼Œå¯ä»¥è®©åŸæœ¬çš„æ•°æ®(ç›¸æˆ–)èµ‹ç»™Num
  60   3                              // Numçš„é«˜8ä½(å…¨ä¸º0)ä¸AT24C02ç¬¬ä¸€ä¸ªå­—èŠ‚å·¦ç§»8ä½ç›¸æˆ–(16ä½)ï¼Œ
  61   3                              // å³ã€å°†Numçš„é«˜8ä½å†™å…¥åˆ°Numä¸­ã€‘
  62   3                              LCD_ShowNum(1,1,Num,5);
  63   3                              LCD_ShowString(2,1,"Read OK");
  64   3                              Delay(1000);
  65   3                              LCD_ShowString(2,1,"        ");
  66   3                      }
  67   2          }
  68   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    223    ----
   CONSTANT SIZE    =     26    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
